
import os
import re

class CerberusIgnore:
    def __init__(self, ignore_file='.cerberusignore'):
        self.ignore_file = ignore_file
        self.ignore_patterns = self.read_ignore_file()

    def read_ignore_file(self):
        try:
            with open(self.ignore_file, 'r') as f:
                return [line.strip() for line in f.readlines()]
        except FileNotFoundError:
            return []

    def is_ignored(self, path):
        for pattern in self.ignore_patterns:
            if re.match(pattern, path):
                return True
        return False

    def add_pattern(self, pattern):
        with open(self.ignore_file, 'a') as f:
            f.write(pattern + '\n')

    def remove_pattern(self, pattern):
        with open(self.ignore_file, 'r') as f:
            lines = [line.strip() for line in f.readlines()]
        with open(self.ignore_file, 'w') as f:
            for line in lines:
                if line != pattern:
                    f.write(line + '\n')

def main():
    ignore = CerberusIgnore()
    print(ignore.ignore_patterns)
    ignore.add_pattern('tests')
    print(ignore.ignore_patterns)
    ignore.remove_pattern('tests')
    print(ignore.ignore_patterns)

if __name__ == '__main__':
    main()
